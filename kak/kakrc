# Plugins
source "%val{config}/plugins/plug.kak/rc/plug.kak"

## plug -- Plugin manager for Kakoune editor
plug "robertmeta/plug.kak" noload

## smarttab -- Automatic handling different styles of indentation and alignment
plug "andreyorst/smarttab.kak" defer smarttab %{
    set-option global softtabstop 2
    hook global WinSetOption filetype=kak %{
        set-option window softtabstop 4
    }
} config %{
    hook global WinSetOption filetype=(.*) expandtab
}

## prelude -- Prelude of shell blocks for Kakoune
plug "alexherbo2/prelude.kak"

## auto-pairs -- Auto-paired characters for Kakoune
plug "alexherbo2/auto-pairs.kak"

## surround -- Surround pairs as-you-type for Kakoune
plug "alexherbo2/surround.kak"

## move-line -- Kakoune plugin to move lines without `xdp`
plug "alexherbo2/move-line.kak" config %{
    map global normal "'" ': move-line-below<ret>'
    map global normal "<a-'>" ': move-line-above<ret>'
}

plug "andreyorst/powerline.kak" config %{
    %sh{
        if [[ $TERM == "linux" ]]; then
            echo nop
        else
            echo powerline-start
        fi
    }
}
# Indent Width
set-option global indentwidth 2
hook global WinSetOption filetype=kak %{
    set-option window indentwidth 4
}

# Highlighters

hook global ModeChange push:normal:insert %{
    add-highlighter -override window/line-numbers number-lines -hlcursor
}

hook global ModeChange pop:insert:normal %{
    add-highlighter -override window/line-numbers number-lines -hlcursor -relative
}

add-highlighter global/line-numbers number-lines -hlcursor -relative
add-highlighter global/line-wrap wrap

# Colorschemes
plug "TeddyDD/kakoune-selenized" theme
plug "Delapouite/kakoune-colors" theme
plug "evanrelf/primer.kak" theme
plug "rubberydub/nord-kakoune" theme
plug "caksoylar/kakoune-mysticaltutor" theme config %{
    %sh{
        if [[ $TERM == "linux" ]]; then
            echo nop
        else
            echo colorscheme
        fi
    } mysticaltutor
}

plug "jordan-yee/kakoune-mysticaltutor-powerline" defer powerline %{
    powerline-theme mysticaltutor
}

# Javascript & JSX format
hook global WinSetOption filetype=javascript %{
    set-option buffer formatcmd 'prettier --parser babel'
}
